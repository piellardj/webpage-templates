var Page;!function(e){!function(e){function n(e){var n=document.querySelector(e);return n||console.error("Cannot find element '"+e+"'."),n}function t(e){return n("input[type=checkbox][id="+e+"]")}var i=document.getElementById("canvas-container"),o=n("canvas[id="+"canvas"+"]"),c=document.getElementById("canvas-buttons-column"),r=t("fullscreen-checkbox-id"),u=t("side-pane-checkbox-id"),a=i.querySelector(".loader"),s=512,l=512;function d(){var e=o.getBoundingClientRect();return[Math.floor(e.width),Math.floor(e.height)]}!function(){function e(e){document.body.style.overflow=e?"hidden":"auto"}r&&(window.addEventListener("load",function(){e(r.checked),r.addEventListener("change",function(){e(r.checked)})},!1),u&&r.addEventListener("change",function(){r.checked&&(u.checked=!1)},!1))}();var f=[0,0],v=[];function h(e){return e+"px"}function g(){i.style.width="100vw";var e=d();if(r.checked?(i.style.height="100%",i.style.maxWidth="",i.style.maxHeight=""):(e[1]=e[0]*l/s,i.style.height=h(e[1]),i.style.maxWidth=h(s),i.style.maxHeight=h(l)),e[0]!==f[0]||e[1]!==f[1]){f=d();for(var n=0,t=v;n<t.length;n++){(0,t[n])(f[0],f[1])}}}window.addEventListener("load",g,!1),r.addEventListener("change",g,!1),window.addEventListener("resize",g,!1);var m,w,E,p=[g],y=[],L=[],k=[],M=[],b=[],C=[],Y=[];function x(e,n){var t=o.getBoundingClientRect();return[(e-t.left)/t.width,(n-t.top)/t.height]}r&&r.addEventListener("change",function(){for(var e=r.checked,n=0,t=p;n<t.length;n++){(0,t[n])(e)}},!1),document.addEventListener("keydown",function(n){27===n.keyCode&&e.toggleFullscreen(!1)}),function(e){var n=[],t=!1;function i(e,t){n[0]=e,n[1]=t}function c(e,n){var o=x(e,n);i(o[0],o[1]),t=!0;for(var c=0,r=y;c<r.length;c++){(0,r[c])()}}function r(){if(t){t=!1;for(var e=0,n=L;e<n.length;e++){(0,n[e])()}}}function u(e,i){var o=x(e,i),c=o[0]-n[0],r=o[1]-n[1];if(n[0]=o[0],n[1]=o[1],t)for(var u=0,a=k;u<a.length;u++){(0,a[u])(c,r)}for(var s=0,l=M;s<l.length;s++){(0,l[s])(o[0],o[1])}}e.getMousePosition=function(){return n.slice()},e.setMousePosition=i,e.isMouseDown=function(){return t},e.mouseDown=c,e.mouseUp=r,e.mouseMove=u,o&&(o.addEventListener("mousedown",function(e){0===e.button&&c(e.clientX,e.clientY)},!1),o.addEventListener("mouseenter",function(){for(var e=0,n=b;e<n.length;e++){(0,n[e])()}},!1),o.addEventListener("mouseleave",function(){for(var e=0,n=C;e<n.length;e++){(0,n[e])()}},!1),o.addEventListener("wheel",function(e){if(Y.length>0){for(var t=e.deltaY>0?1:-1,i=0,o=Y;i<o.length;i++){(0,o[i])(t,n)}return e.preventDefault(),!1}return!0},!1),window.addEventListener("mousemove",function(e){u(e.clientX,e.clientY)}),window.addEventListener("mouseup",function(e){0===e.button&&r()}))}(m||(m={})),function(e){var n=[],t=0;function i(e,n){var t=e.clientX-n.clientX,i=e.clientY-n.clientY;return Math.sqrt(t*t+i*i)}o&&(o.addEventListener("touchstart",function(e){for(var o=0===n.length,c=0;c<e.changedTouches.length;++c){for(var r=e.changedTouches[c],u=!1,a=0,s=n;a<s.length;a++){var l=s[a];if(r.identifier===l.id){u=!0;break}}u||n.push({id:r.identifier,clientX:r.clientX,clientY:r.clientY})}if(o&&n.length>0){var d=n[0];m.mouseDown(d.clientX,d.clientY)}else 2===n.length&&(t=i(n[0],n[1]))},!1),window.addEventListener("touchend",function(e){for(var t=n.length>0,i=0;i<e.changedTouches.length;++i)for(var o=e.changedTouches[i],c=0;c<n.length;++c)o.identifier===n[c].id&&(n.splice(c,1),c--);if(1===n.length){var r=x(n[0].clientX,n[0].clientY);m.setMousePosition(r[0],r[1])}else t&&0===n.length&&m.mouseUp()}),window.addEventListener("touchmove",function(e){for(var o=e.changedTouches,c=0;c<o.length;++c)for(var r=o[c],u=0,a=n;u<a.length;u++){var s=a[u];r.identifier===s.id&&(s.clientX=r.clientX,s.clientY=r.clientY)}var l=M.length+k.length;if(m.isMouseDown()&&l>0&&e.preventDefault(),1===n.length)m.mouseMove(n[0].clientX,n[0].clientY);else if(2===n.length){var d=i(n[0],n[1]),f=(t-d)/t;t=d;for(var v=x(.5*(n[0].clientX+n[1].clientX),.5*(n[0].clientY+n[1].clientY)),h=0,g=Y;h<g.length;h++)(0,g[h])(5*f,v)}},{passive:!1}))}(w||(w={})),function(e){var t={};e.getIndicatorSpan=function(e){if(!t[e]){var i=e+"-indicator-id";t[e]=n("#"+i+" span")}return t[e]}}(E||(E={})),e.Observers=Object.freeze({canvasResize:v,fullscreenToggle:p,mouseDown:y,mouseDrag:k,mouseEnter:b,mouseLeave:C,mouseMove:M,mouseWheel:Y,mouseUp:L}),e.getAspectRatio=function(){var e=d();return e[0]/e[1]},e.getCanvas=function(){return o},e.getCanvasContainer=function(){return i},e.getSize=function(){return d()},e.getMousePosition=function(){return m.getMousePosition()},e.isFullScreen=function(){return r&&r.checked},e.isMouseDown=function(){return m.isMouseDown()},e.setIndicatorText=function(e,n){var t=E.getIndicatorSpan(e);t&&(t.innerText=n)},e.setIndicatorsVisibility=function(e){document.getElementById("indicators").style.display=e?"block":"none"},e.setMaxSize=function(e,n){s=e,l=n,g()},e.setResizable=function(e){c.style.display=e?"block":"none"},e.setLoaderText=function(e){a&&(a.querySelector("span").innerText=e)},e.showLoader=function(e){a&&(a.style.display=e?"block":"")},e.toggleFullscreen=function(e){if(r&&e!==r.checked)if(r.checked=e,"function"==typeof window.CustomEvent)r.dispatchEvent(new CustomEvent("change"));else if("function"==typeof CustomEvent.prototype.initCustomEvent){var n=document.createEvent("CustomEvent");n.initCustomEvent("change",!1,!1,void 0),r.dispatchEvent(n)}}}(e.Canvas||(e.Canvas={}))}(Page||(Page={}));