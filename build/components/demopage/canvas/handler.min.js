const Canvas=function(){function e(e){const n=document.querySelector(e);return n||console.error("Cannot find element '"+e+"'."),n}function n(n){return e("input[type=checkbox][id="+n+"]")}const t=document.getElementById("canvas-container"),o=e("canvas[id="+"canvas"+"]");const c=document.getElementById("canvas-buttons-column"),i=n("fullscreen-checkbox-id"),s=t.querySelector(".loader");let d=512,u=512;function r(e){const n=Array.prototype.slice.call(arguments,1);for(let t=0;t<e.length;++t)e[t].apply(n)}function a(){const e=o.getBoundingClientRect();return[Math.floor(e.width),Math.floor(e.height)]}!function(){function e(e){document.body.style.overflow=e?"hidden":"auto"}const t=n("side-pane-checkbox-id");i&&(window.addEventListener("load",function(){e(i.checked),i.addEventListener("change",function(){e(i.checked)})}),t&&i.addEventListener("change",function(){i.checked&&(t.checked=!1)}))}();let l=[0,0];const f=[];function h(e){return e+"px"}function g(){t.style.width="100vw";let[e,n]=a();i.checked?(t.style.height="100%",t.style["max-width"]="",t.style["max-height"]=""):(n=e*u/d,t.style.height=h(n),t.style["max-width"]=h(d),t.style["max-height"]=h(u)),e===l[0]&&n===l[1]||(l=a(),r(f,l[0],l[1]))}window.addEventListener("load",g),i.addEventListener("change",g),window.addEventListener("resize",g);const m=[];let v=!1;const y=[g],w=[],E=[],p=[],b=[],k=[],L=[],x=[];return i&&i.addEventListener("change",function(){r(y,i.checked)}),o&&(o.addEventListener("mousedown",function(e){0===e.button&&(v=!0,r(w))}),o.addEventListener("mouseenter",function(){r(p)}),o.addEventListener("mouseleave",function(){r(b)}),o.addEventListener("wheel",function(e){return!(x.length>0)||(r(x,Math.sign(e.deltaY)),e.preventDefault(),!1)}),window.addEventListener("mousemove",function(e){const n=o.getBoundingClientRect(),t=(e.clientX-n.left)/n.width,c=(e.clientY-n.top)/n.height,i=t-m[0],s=c-m[1];m[0]=t,m[1]=c,v&&r(E,i,s),r(k,m[0],m[1])}),window.addEventListener("mouseup",function(e){0===e.button&&v&&(v=!1,r(L))})),Object.freeze({Observers:Object.freeze({canvasResize:f,fullscreenToggle:y,mouseDown:w,mouseDrag:E,mouseEnter:p,mouseLeave:b,mouseMove:k,mouseWheel:x,mouseUp:L}),getAspectRatio:function(){const e=a();return e[0]/e[1]},getCanvas:function(){return o},getSize:a,getMousePosition:function(){return m},isFullScreen:function(){return i&&i.checked},isMouseDown:function(){return v},setIndicatorText:function(e,n){const t=e+"-indicator-id",o=document.getElementById(t);o?o.innerText=e+": "+n:console.error("Cannot find indicator '"+t+"'.")},setIndicatorsVisibility:function(e){document.getElementById("indicators").style.display=e?"block":"none"},setMaxSize:function(e,n){d=e,u=n,g()},setResizable:function(e){c.style.display=e?"block":"none"},showLoader:function(e){s&&(s.style.display=e?"block":"")},toggleFullscreen:function(e){if(i){e!=i.checked&&(i.checked=e,i.onchange())}}})}();