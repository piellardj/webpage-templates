const Canvas=function(){function e(e){const n=document.querySelector(e);return n||console.error("Cannot find element '"+e+"'."),n}function n(n){return e("input[type=checkbox][id="+n+"]")}const t=document.getElementById("canvas-container"),o=e("canvas[id="+"canvas"+"]");const c=document.getElementById("canvas-buttons-column"),s=n("fullscreen-checkbox-id"),i=t.querySelector(".loader");let u=512,d=512;function r(e){const n=Array.prototype.slice.call(arguments,1);for(let t=0;t<e.length;++t)e[t].apply(null,n)}function l(){const e=o.getBoundingClientRect();return[Math.floor(e.width),Math.floor(e.height)]}!function(){function e(e){document.body.style.overflow=e?"hidden":"auto"}const t=n("side-pane-checkbox-id");s&&(window.addEventListener("load",function(){e(s.checked),s.addEventListener("change",function(){e(s.checked)})},!1),t&&s.addEventListener("change",function(){s.checked&&(t.checked=!1)},!1))}();let a=[0,0];const f=[];function h(e){return e+"px"}function g(){t.style.width="100vw";let[e,n]=l();s.checked?(t.style.height="100%",t.style["max-width"]="",t.style["max-height"]=""):(n=e*d/u,t.style.height=h(n),t.style["max-width"]=h(u),t.style["max-height"]=h(d)),e===a[0]&&n===a[1]||(a=l(),r(f,a[0],a[1]))}window.addEventListener("load",g,!1),s.addEventListener("change",g,!1),window.addEventListener("resize",g,!1);const v=[];let m=!1;const y=[g],w=[],p=[],b=[],E=[],k=[],L=[],x=[];return s&&s.addEventListener("change",function(){r(y,s.checked)},!1),o&&(o.addEventListener("mousedown",function(e){0===e.button&&(m=!0,r(w))},!1),o.addEventListener("mouseenter",function(){r(b)},!1),o.addEventListener("mouseleave",function(){r(E)},!1),o.addEventListener("wheel",function(e){return!(x.length>0)||(r(x,Math.sign(e.deltaY)),e.preventDefault(),!1)},!1),window.addEventListener("mousemove",function(e){const n=o.getBoundingClientRect(),t=(e.clientX-n.left)/n.width,c=(e.clientY-n.top)/n.height,s=t-v[0],i=c-v[1];v[0]=t,v[1]=c,m&&r(p,s,i),console.log(t+" : "+c),r(k,t,c)}),window.addEventListener("mouseup",function(e){0===e.button&&m&&(m=!1,r(L))})),Object.freeze({Observers:Object.freeze({canvasResize:f,fullscreenToggle:y,mouseDown:w,mouseDrag:p,mouseEnter:b,mouseLeave:E,mouseMove:k,mouseWheel:x,mouseUp:L}),getAspectRatio:function(){const e=l();return e[0]/e[1]},getCanvas:function(){return o},getSize:l,getMousePosition:function(){return v},isFullScreen:function(){return s&&s.checked},isMouseDown:function(){return m},setIndicatorText:function(e,n){const t=e+"-indicator-id",o=document.getElementById(t);o?o.innerText=e+": "+n:console.error("Cannot find indicator '"+t+"'.")},setIndicatorsVisibility:function(e){document.getElementById("indicators").style.display=e?"block":"none"},setMaxSize:function(e,n){u=e,d=n,g()},setResizable:function(e){c.style.display=e?"block":"none"},showLoader:function(e){i&&(i.style.display=e?"block":"")},toggleFullscreen:function(e){if(s){e!=s.checked&&(s.checked=e,s.onchange())}}})}();Canvas.Observers.mouseDown.push(function(){console.log("mousedown")}),Canvas.Observers.mouseUp.push(function(){console.log("mouseup")}),Canvas.Observers.mouseMove.push(function(e,n){console.log("moved ("+e+" ; "+n+")")}),Canvas.Observers.mouseDrag.push(function(e,n){console.log("dragged ("+e+" ; "+n+")")});