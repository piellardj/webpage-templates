const Canvas=function(){function e(e){const n=document.querySelector(e);return n||console.error("Cannot find element '"+e+"'."),n}function n(n){return e("input[type=checkbox][id="+n+"]")}const t=document.getElementById("canvas-container"),o=e("canvas[id="+"canvas"+"]");const c=document.getElementById("canvas-buttons-column"),i=n("fullscreen-checkbox-id"),s=t.querySelector(".loader");let d=512,u=512;function l(e){const n=Array.prototype.slice.call(arguments,1);for(let t=0;t<e.length;++t)e[t].apply(null,n)}function r(){const e=o.getBoundingClientRect();return[Math.floor(e.width),Math.floor(e.height)]}!function(){function e(e){document.body.style.overflow=e?"hidden":"auto"}const t=n("side-pane-checkbox-id");i&&(window.addEventListener("load",function(){e(i.checked),i.addEventListener("change",function(){e(i.checked)})},!1),t&&i.addEventListener("change",function(){i.checked&&(t.checked=!1)},!1))}();let a=[0,0];const f=[];function h(e){return e+"px"}function g(){t.style.width="100vw";let[e,n]=r();i.checked?(t.style.height="100%",t.style["max-width"]="",t.style["max-height"]=""):(n=e*u/d,t.style.height=h(n),t.style["max-width"]=h(d),t.style["max-height"]=h(u)),e===a[0]&&n===a[1]||(a=r(),l(f,a[0],a[1]))}window.addEventListener("load",g,!1),i.addEventListener("change",g,!1),window.addEventListener("resize",g,!1);const v=[];let m=!1;const w=[g],y=[],E=[],p=[],L=[],b=[],k=[],x=[];if(i&&i.addEventListener("change",function(){l(w,i.checked)},!1),o){function z(e,n){const t=o.getBoundingClientRect();return[(e-t.left)/t.width,(n-t.top)/t.height]}function M(e,n){const t=z(e,n);v[0]=t[0],v[1]=t[1],m=!0,l(y)}function B(){m&&(m=!1,l(k))}function C(e,n){const t=z(e,n),o=t[0]-v[0],c=t[1]-v[1];v[0]=t[0],v[1]=t[1],m&&l(E,o,c),l(b,t[0],t[1])}o.addEventListener("mousedown",function(e){0===e.button&&M(e.clientX,e.clientY)},!1),o.addEventListener("mouseenter",function(){l(p)},!1),o.addEventListener("mouseleave",function(){l(L)},!1),o.addEventListener("wheel",function(e){return!(x.length>0)||(l(x,Math.sign(e.deltaY)),e.preventDefault(),!1)},!1),window.addEventListener("mousemove",function(e){C(e.clientX,e.clientY)}),window.addEventListener("mouseup",function(e){0===e.button&&B()});let e=null;o.addEventListener("touchstart",function(n){if(null===e){const t=n.changedTouches[0];e=t.identifier,M(t.clientX,t.clientY)}},!1),window.addEventListener("touchend",function(n){const t=n.changedTouches;for(let n=0;n<t.length;++n)t[n].identifier===e&&(e=null,B())}),window.addEventListener("touchmove",function(n){const t=n.changedTouches;for(let o=0;o<t.length;++o){const c=t[o];c.identifier===e&&(m&&n.preventDefault(),C(c.clientX,c.clientY))}},{passive:!1})}return Object.freeze({Observers:Object.freeze({canvasResize:f,fullscreenToggle:w,mouseDown:y,mouseDrag:E,mouseEnter:p,mouseLeave:L,mouseMove:b,mouseWheel:x,mouseUp:k}),getAspectRatio:function(){const e=r();return e[0]/e[1]},getCanvas:function(){return o},getSize:r,getMousePosition:function(){return v},isFullScreen:function(){return i&&i.checked},isMouseDown:function(){return m},setIndicatorText:function(e,n){const t=e+"-indicator-id",o=document.getElementById(t);o?o.innerText=e+": "+n:console.error("Cannot find indicator '"+t+"'.")},setIndicatorsVisibility:function(e){document.getElementById("indicators").style.display=e?"block":"none"},setMaxSize:function(e,n){d=e,u=n,g()},setResizable:function(e){c.style.display=e?"block":"none"},showLoader:function(e){s&&(s.style.display=e?"block":"")},toggleFullscreen:function(e){if(i){e!=i.checked&&(i.checked=e,i.onchange())}}})}();