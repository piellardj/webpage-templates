var Page;!function(e){!function(t){function n(e,t,n){return Math.max(t,Math.max(t,e))}function r(e,t,r){return n(Math.round(e),t)}function o(e,t){return(e%t+t)%t}var i;!function(e){function t(e){var t=e.toString(16).toUpperCase();return 2===t.length?t:"0"+t}e.parseHexa=function(e){return/^#[0-9a-fA-F]{6}$/.test(e)?e.toUpperCase():null},e.hsvToRgb=function(e){var t,n=e.h/60,i=e.s*e.v,a=i*(1-Math.abs(o(n,2)-1));t=n<=1?{r:i,g:a,b:0}:n<=2?{r:a,g:i,b:0}:n<=3?{r:0,g:i,b:a}:n<=4?{r:0,g:a,b:i}:n<=5?{r:a,g:0,b:i}:{r:i,g:0,b:a};var l=e.v-i;return t.r=r(255*(t.r+l),0),t.g=r(255*(t.g+l),0),t.b=r(255*(t.b+l),0),t},e.rgbToHsv=function(e){var t=e.r/255,n=e.g/255,i=e.b/255,a=Math.max(t,n,i),l=a-Math.min(t,n,i),u={h:0,s:0,v:a};return 0!==l&&(a===t?u.h=(n-i)/l%6*60:a===n?u.h=60*((i-t)/l+2):a===i&&(u.h=60*((t-n)/l+4))),0!==a&&(u.s=l/a),u.h=o(u.h,360),u.h=r(u.h,0),u},e.rgbToHex=function(e){return"#"+t(e.r)+t(e.g)+t(e.b)},e.hexToRgb=function(e){return{r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16)}}}(i||(i={}));var a,l,u=function(){function e(e){var t=this;this.observers=[],this.element=e,this.id=e.id,this.colorPreview=e.querySelector(".color-preview"),this.colorPreviewText=e.querySelector(".color-value"),this.updateVisiblePart(),this.element.addEventListener("click",function(){l.createPopup(t)})}return Object.defineProperty(e.prototype,"value",{get:function(){return this.element.dataset.currentColor},set:function(e){if(this.value!==e){this.element.dataset.currentColor=e,this.updateVisiblePart();for(var t=i.hexToRgb(e),n=0,r=this.observers;n<r.length;n++){(0,r[n])(t)}}},enumerable:!1,configurable:!0}),e.prototype.attachPopup=function(e){this.element.parentElement.appendChild(e)},e.prototype.updateVisiblePart=function(){var e=this.value;this.colorPreview.style.background=e,this.colorPreviewText.textContent=e},e}(),c={};function s(e){if(!c[e]){var t=document.querySelector("#"+e+".color-picker");t&&(c[e]=new u(t))}return c[e]}!function(t){var n="color-picker";t.storeState=function(t){e.Helpers.URL.setQueryParameter(n,t.id,t.value)},t.applyStoredState=function(){e.Helpers.URL.loopOnParameters(n,function(e,t){var n=i.parseHexa(t);if(n){var r=s(e);r&&(r.value=n)}})}}(a||(a={})),function(e){var t,o=null,l=null,u=null,c=null,s=null,h=null,d=null,p=null,v=null,g=null,f={h:200,s:.75,v:.5};function b(e,t){function n(t,n){var r=e.getBoundingClientRect(),o=(t-r.left)/r.width,i=(n-r.top)/r.height;return{x:Math.max(0,Math.min(1,o)),y:Math.max(0,Math.min(1,i))}}var r=e.querySelector(".cursor"),o={x:0,y:0},i=!1;e.addEventListener("mousedown",function(e){if(i=!0,o.x=0,o.y=0,r&&e.target===r){var a=r.getBoundingClientRect();o.x=.5*a.width-(e.clientX-a.left),o.y=.5*a.height-(e.clientY-a.top),console.log(JSON.stringify(o))}else{var l=n(e.clientX,e.clientY);t(l)}}),window.addEventListener("mouseup",function(){i=!1}),window.addEventListener("mousemove",function(e){if(i){var r=n(e.clientX+o.x,e.clientY+o.y);t(r)}});var a=[];e.addEventListener("touchstart",function(e){i=!0;for(var r=0===a.length,o=0;o<e.changedTouches.length;++o){for(var l=e.changedTouches[o],u=!1,c=0,s=a;c<s.length;c++){var h=s[c];if(l.identifier===h){u=!0;break}}u||a.push(l.identifier)}if(r&&a.length>0){var d=n(e.changedTouches[0].clientX,e.changedTouches[0].clientY);t(d)}},!1),window.addEventListener("touchend",function(e){for(var t=a.length>0,n=0;n<e.changedTouches.length;++n)for(var r=e.changedTouches[n],o=0;o<a.length;++o)r.identifier===a[o]&&(a.splice(o,1),o--);t&&0===a.length&&(i=!1)}),window.addEventListener("touchmove",function(e){if(a.length>0&&i)for(var r=e.changedTouches,o=0;o<r.length;++o)for(var l=r[o],u=0,c=a;u<c.length;u++){var s=c[u];if(l.identifier===s){var h=n(l.clientX,l.clientY);return t(h),void e.preventDefault()}}},{passive:!1})}function m(e){return Math.round(100*e)+"%"}function x(){var e=i.hsvToRgb(f),t=i.rgbToHex(e),n="rgb("+e.r+", "+e.g+", "+e.b+")",r="hsl("+f.h+", 100%, 50%)";u.style.background="linear-gradient(to right, white, "+r+")",h.style.background=r,c.style.background=n,d.style.background=n,p.value=t,v.textContent=e.r+", "+e.g+", "+e.b,g.textContent=f.h+"Â°, "+m(f.s)+", "+m(f.v),h.style.left=m(f.h/360),c.style.left=m(f.s),c.style.top=m(1-f.v)}function y(){var e=i.hsvToRgb(f),n=i.rgbToHex(e);x(),t&&(t.value=n),a.storeState(t)}e.createPopup=function(e){t=e;var a=e.value,C=i.hexToRgb(a),w=i.rgbToHsv(C);f.h=w.h,f.v=w.v,f.s=w.s,null===o&&function(){function e(e,t){var n=document.createElement(e);return t&&(n.className=t.join(" ")),n}o=e("div",["popup","color-picker-popup"]),l=e("div",["block","picker","value-saturation-picker"]),u=e("span",["color-filter","outlined"]),l.appendChild(u);var t=e("span",["color-filter","outlined"]);t.style.background="linear-gradient(to top, black, rgba(0,0,0,0))",l.appendChild(t),c=e("span",["cursor"]),l.appendChild(c),o.appendChild(l),s=e("div",["block","picker","hue-picker"]);var a=e("span",["hue-bar"]);s.appendChild(a),h=e("span",["cursor"]),s.appendChild(h),o.appendChild(s);var x=e("div",["preview-block"]);(d=e("div",["preview-color","outlined"])).classList.add("block"),x.appendChild(d);{var C=e("table",["block"]);function w(e){var t=document.createElement("tr"),n=document.createElement("td");n.textContent=e+":";var r=document.createElement("td");return t.appendChild(n),t.appendChild(r),C.appendChild(t),r}var k=w("hexa");(p=document.createElement("input")).type="text",p.minLength=7,p.maxLength=7,p.size=7,p.pattern="#[0-9a-fA-F]{6}",p.addEventListener("input",function(){var e=p.value;if(i.parseHexa(e)){var t=i.hexToRgb(e),n=i.rgbToHsv(t);f.h=n.h,f.s=n.s,f.v=n.v,y()}}),k.appendChild(p),v=w("rgb"),g=w("hsv"),x.appendChild(C)}o.appendChild(x),b(s,function(e){f.h=r(360*e.x,0),y()}),b(l,function(e){f.s=n(e.x,0),f.v=n(1-e.y,0),y(),c.style.left=m(e.x),c.style.top=m(e.y)});var T=!1;o.addEventListener("mousedown",function(){T=!0}),window.addEventListener("mouseup",function(e){!o.contains(e.target)&&o.parentElement&&!T&&o.parentElement.removeChild(o),T=!1})}(),x(),o.style.top="",o.style.left="",e.attachPopup(o),function(){if(o&&o.parentElement){var e=(document.querySelector(".controls-block")||document.body).getBoundingClientRect();o.style.maxWidth=e.width-32+"px",o.style.maxHeight=e.height-32+"px";var t=o.parentElement.getBoundingClientRect(),n=o.getBoundingClientRect(),r=Math.max(0,e.left+16-t.left),i=Math.min(0,e.left+e.width-16-(t.left+n.width)),a=Math.max(0,e.top+16-t.top),l=Math.min(0,e.top+e.height-16-(t.top+n.height));o.style.left=r+i+"px",o.style.top=a+l+"px"}}()}}(l||(l={})),window.addEventListener("load",function(){for(var e=document.querySelectorAll(".color-picker"),t=0;t<e.length;t++){s(e[t].id)}a.applyStoredState()}),t.addObserver=function(e,t){var n=s(e);return n&&n.observers.push(t),!1},t.getValue=function(e){s(e);var t=c[e].value;return i.hexToRgb(t)},t.setValue=function(e,t,n,o){var a={r:r(t,0),g:r(n,0),b:r(o,0)},l=i.rgbToHex(a);s(e).value=l}}(e.ColorPicker||(e.ColorPicker={}))}(Page||(Page={}));