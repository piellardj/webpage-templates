var Page;!function(e){!function(t){function n(e,t,n){return Math.max(t,Math.max(t,e))}function r(e,t,r){return n(Math.round(e),t)}var o;!function(e){function t(e){var t=e.toString(16).toUpperCase();return 2===t.length?t:"0"+t}e.parseHexa=function(e){return/^#[0-9a-fA-F]{6}$/.test(e)?e:null},e.hsvToRgb=function(e){var t,n=e.h/60,o=e.s*e.v,i=o*(1-Math.abs(n%2-1));t=n<=1?{r:o,g:i,b:0}:n<=2?{r:i,g:o,b:0}:n<=3?{r:0,g:o,b:i}:n<=4?{r:0,g:i,b:o}:n<=5?{r:i,g:0,b:o}:{r:o,g:0,b:i};var a=e.v-o;return t.r=r(255*(t.r+a),0),t.g=r(255*(t.g+a),0),t.b=r(255*(t.b+a),0),t},e.rgbToHsv=function(e){var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.max(t,n,o),a=i-Math.min(t,n,o),l={h:0,s:0,v:i};return 0!==a&&(i===t?l.h=(n-o)/a%6*60:i===n?l.h=60*((o-t)/a+2):i===o&&(l.h=60*((t-n)/a+4))),0!==i&&(l.s=a/i),l.h=r(l.h,0),l},e.rgbToHex=function(e){return"#"+t(e.r)+t(e.g)+t(e.b)},e.hexToRgb=function(e){return{r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16)}}}(o||(o={}));var i,a,l=function(){function e(e){this.observers=[],this.element=e,this.id=e.id,this.colorPreview=e.querySelector(".color-preview"),this.colorPreviewText=e.querySelector(".color-value"),this.updateVisiblePart()}return Object.defineProperty(e.prototype,"value",{get:function(){return this.element.dataset.currentColor},set:function(e){if(this.value!==e){this.element.dataset.currentColor=e,this.updateVisiblePart();for(var t=o.hexToRgb(e),n=0,r=this.observers;n<r.length;n++){(0,r[n])(t)}}},enumerable:!1,configurable:!0}),e.prototype.attachPopup=function(e){this.element.parentElement.appendChild(e)},e.prototype.updateVisiblePart=function(){var e=this.value;this.colorPreview.style.background=e,this.colorPreviewText.textContent=e},e}();!function(t){var n="color-picker";t.storeState=function(t){e.Helpers.URL.setQueryParameter(n,t.id,t.value)},t.applyStoredState=function(){e.Helpers.URL.loopOnParameters(n,function(e,t){var n=o.parseHexa(t);if(n){var r=u[e];r&&(r.value=n)}})}}(i||(i={})),function(e){var t,a=null,l=null,u=null,c=null,s=null,d=null,h=null,p=null,v=null,g=null,f={h:200,s:.75,v:.5};function b(e,t){function n(t,n){var r=e.getBoundingClientRect(),o=(t-r.left)/r.width,i=(n-r.top)/r.height;return{x:Math.max(0,Math.min(1,o)),y:Math.max(0,Math.min(1,i))}}var r=e.querySelector(".cursor"),o={x:0,y:0},i=!1;e.addEventListener("mousedown",function(e){if(i=!0,o.x=0,o.y=0,r&&e.target===r){var a=r.getBoundingClientRect();o.x=.5*a.width-(e.clientX-a.left),o.y=.5*a.height-(e.clientY-a.top),console.log(JSON.stringify(o))}else{var l=n(e.clientX,e.clientY);t(l)}}),window.addEventListener("mouseup",function(){i=!1}),window.addEventListener("mousemove",function(e){if(i){var r=n(e.clientX+o.x,e.clientY+o.y);t(r)}});var a=[];e.addEventListener("touchstart",function(e){i=!0;for(var r=0===a.length,o=0;o<e.changedTouches.length;++o){for(var l=e.changedTouches[o],u=!1,c=0,s=a;c<s.length;c++){var d=s[c];if(l.identifier===d){u=!0;break}}u||a.push(l.identifier)}if(r&&a.length>0){var h=n(e.changedTouches[0].clientX,e.changedTouches[0].clientY);t(h)}},!1),window.addEventListener("touchend",function(e){for(var t=a.length>0,n=0;n<e.changedTouches.length;++n)for(var r=e.changedTouches[n],o=0;o<a.length;++o)r.identifier===a[o]&&(a.splice(o,1),o--);t&&0===a.length&&(i=!1)}),window.addEventListener("touchmove",function(e){if(a.length>0&&i)for(var r=e.changedTouches,o=0;o<r.length;++o)for(var l=r[o],u=0,c=a;u<c.length;u++){var s=c[u];if(l.identifier===s){var d=n(l.clientX,l.clientY);return t(d),void e.preventDefault()}}},{passive:!1})}function m(e){return Math.round(100*e)+"%"}function x(){var e=o.hsvToRgb(f),t=o.rgbToHex(e),n="rgb("+e.r+", "+e.g+", "+e.b+")",r="hsl("+f.h+", 100%, 50%)";u.style.background="linear-gradient(to right, white, "+r+")",d.style.background=r,c.style.background=n,h.style.background=n,p.textContent=t,v.textContent=e.r+", "+e.g+", "+e.b,g.textContent=f.h+"Â°, "+m(f.s)+", "+m(f.v),d.style.left=m(f.h/360),c.style.left=m(f.s),c.style.top=m(1-f.v)}function y(){var e=o.hsvToRgb(f),n=o.rgbToHex(e);x(),t&&(t.value=n),i.storeState(t)}e.createPopup=function(e){t=e;var i=e.value,C=o.hexToRgb(i),w=o.rgbToHsv(C);f.h=w.h,f.v=w.v,f.s=w.s,null===a&&function(){function e(e,t){var n=document.createElement(e);return t&&(n.className=t.join(" ")),n}a=e("div",["popup","color-picker-popup"]),l=e("div",["block","picker","value-saturation-picker"]),u=e("span",["color-filter","outlined"]),l.appendChild(u);var t=e("span",["color-filter","outlined"]);t.style.background="linear-gradient(to top, black, rgba(0,0,0,0))",l.appendChild(t),c=e("span",["cursor"]),l.appendChild(c),a.appendChild(l),s=e("div",["block","picker","hue-picker"]);var o=e("span",["hue-bar"]);s.appendChild(o),d=e("span",["cursor"]),s.appendChild(d),a.appendChild(s);var i=e("div",["preview-block"]);(h=e("div",["preview-color","outlined"])).classList.add("block"),i.appendChild(h);{var x=e("table",["block"]);function C(e){var t=document.createElement("tr"),n=document.createElement("td");n.textContent=e+":";var r=document.createElement("td");return t.appendChild(n),t.appendChild(r),x.appendChild(t),r}p=C("hexa"),v=C("rgb"),g=C("hsv"),i.appendChild(x)}a.appendChild(i),b(s,function(e){f.h=r(360*e.x,0),y()}),b(l,function(e){f.s=n(e.x,0),f.v=n(1-e.y,0),y(),c.style.left=m(e.x),c.style.top=m(e.y)});var w=!1;a.addEventListener("mousedown",function(){w=!0}),window.addEventListener("mouseup",function(e){!a.contains(e.target)&&a.parentElement&&!w&&a.parentElement.removeChild(a),w=!1})}(),x(),a.style.top="",a.style.left="",e.attachPopup(a),function(){if(a&&a.parentElement){var e=(document.querySelector(".controls-block")||document.body).getBoundingClientRect();a.style.maxWidth=e.width-32+"px",a.style.maxHeight=e.height-32+"px";var t=a.parentElement.getBoundingClientRect(),n=a.getBoundingClientRect(),r=Math.max(0,e.left+16-t.left),o=Math.min(0,e.left+e.width-16-(t.left+n.width)),i=Math.max(0,e.top+16-t.top),l=Math.min(0,e.top+e.height-16-(t.top+n.height));a.style.left=r+o+"px",a.style.top=i+l+"px"}}()}}(a||(a={}));var u={};window.addEventListener("load",function(){for(var e=document.querySelectorAll(".color-picker"),t=function(t){var n=e[t],r=new l(n);n.id&&(u[n.id]=r),n.addEventListener("click",function(e){a.createPopup(r),e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()})},n=0;n<e.length;n++)t(n);i.applyStoredState()}),t.addObserver=function(e,t){var n=u[e];return n&&n.observers.push(t),!1},t.getValue=function(e){var t=u[e].value;return o.hexToRgb(t)},t.setValue=function(e,t,n,r){var i={r:t,g:n,b:r},a=o.rgbToHex(i);u[e].value=a}}(e.ColorPicker||(e.ColorPicker={}))}(Page||(Page={}));