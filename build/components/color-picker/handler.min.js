var Page;!function(e){!function(e){function t(e,t,n){return Math.max(t,Math.max(t,e))}function n(e,n,r){return t(Math.round(e),n)}var r;!function(e){function t(e){var t=e.toString(16).toUpperCase();return 2===t.length?t:"0"+t}e.hsvToRgb=function(e){var t,r=e.h/60,o=e.s*e.v,i=o*(1-Math.abs(r%2-1));t=r<=1?{r:o,g:i,b:0}:r<=2?{r:i,g:o,b:0}:r<=3?{r:0,g:o,b:i}:r<=4?{r:0,g:i,b:o}:r<=5?{r:i,g:0,b:o}:{r:o,g:0,b:i};var a=e.v-o;return t.r=n(255*(t.r+a),0),t.g=n(255*(t.g+a),0),t.b=n(255*(t.b+a),0),t},e.rgbToHsv=function(e){var t=e.r/255,r=e.g/255,o=e.b/255,i=Math.max(t,r,o),a=i-Math.min(t,r,o),l={h:0,s:0,v:i};return 0!==a&&(i===t?l.h=(r-o)/a%6*60:i===r?l.h=60*((o-t)/a+2):i===o&&(l.h=60*((t-r)/a+4))),0!==i&&(l.s=a/i),l.h=n(l.h,0),l},e.rgbToHex=function(e){return"#"+t(e.r)+t(e.g)+t(e.b)},e.hexToRgb=function(e){return{r:parseInt(e.substring(1,3),16),g:parseInt(e.substring(3,5),16),b:parseInt(e.substring(5,7),16)}}}(r||(r={}));var o,i=function(){function e(e){this.observers=[],this.element=e,this.colorPreview=e.querySelector(".color-preview"),this.colorPreviewText=e.querySelector(".color-value"),this.updateVisiblePart()}return Object.defineProperty(e.prototype,"value",{get:function(){return this.element.dataset.currentColor},set:function(e){if(this.value!==e){this.element.dataset.currentColor=e,this.updateVisiblePart();for(var t=r.hexToRgb(e),n=0,o=this.observers;n<o.length;n++){(0,o[n])(t)}}},enumerable:!1,configurable:!0}),e.prototype.attachPopup=function(e){this.element.parentElement.appendChild(e)},e.prototype.updateVisiblePart=function(){var e=this.value;this.colorPreview.style.background=e,this.colorPreviewText.textContent=e},e}();!function(e){var o,i=null,a=null,l=null,u=null,c=null,d=null,s=null,h=null,p=null,v=null,g={h:200,s:.75,v:.5};function f(e,t){function n(t,n){var r=e.getBoundingClientRect(),o=(t-r.left)/r.width,i=(n-r.top)/r.height;return{x:Math.max(0,Math.min(1,o)),y:Math.max(0,Math.min(1,i))}}var r=e.querySelector(".cursor"),o={x:0,y:0},i=!1;e.addEventListener("mousedown",function(e){if(i=!0,o.x=0,o.y=0,r&&e.target===r){var a=r.getBoundingClientRect();o.x=.5*a.width-(e.clientX-a.left),o.y=.5*a.height-(e.clientY-a.top),console.log(JSON.stringify(o))}else{var l=n(e.clientX,e.clientY);t(l)}}),window.addEventListener("mouseup",function(){i=!1}),window.addEventListener("mousemove",function(e){if(i){var r=n(e.clientX+o.x,e.clientY+o.y);t(r)}});var a=[];e.addEventListener("touchstart",function(e){i=!0;for(var r=0===a.length,o=0;o<e.changedTouches.length;++o){for(var l=e.changedTouches[o],u=!1,c=0,d=a;c<d.length;c++){var s=d[c];if(l.identifier===s){u=!0;break}}u||a.push(l.identifier)}if(r&&a.length>0){var h=n(e.changedTouches[0].clientX,e.changedTouches[0].clientY);t(h)}},!1),window.addEventListener("touchend",function(e){for(var t=a.length>0,n=0;n<e.changedTouches.length;++n)for(var r=e.changedTouches[n],o=0;o<a.length;++o)r.identifier===a[o]&&(a.splice(o,1),o--);t&&0===a.length&&(i=!1)}),window.addEventListener("touchmove",function(e){if(a.length>0&&i)for(var r=e.changedTouches,o=0;o<r.length;++o)for(var l=r[o],u=0,c=a;u<c.length;u++){var d=c[u];if(l.identifier===d){var s=n(l.clientX,l.clientY);return t(s),void e.preventDefault()}}},{passive:!1})}function b(e){return Math.round(100*e)+"%"}function m(){var e=r.hsvToRgb(g),t=r.rgbToHex(e),n="rgb("+e.r+", "+e.g+", "+e.b+")",i="hsl("+g.h+", 100%, 50%)";l.style.background="linear-gradient(to right, white, "+i+")",d.style.background=i,u.style.background=n,s.style.background=n,h.textContent=t,p.textContent=e.r+", "+e.g+", "+e.b,v.textContent=g.h+"Â°, "+b(g.s)+", "+b(g.v),d.style.left=b(g.h/360),u.style.left=b(g.s),u.style.top=b(1-g.v),o&&(o.value=t)}e.createPopup=function(e){o=e;var x=e.value,y=r.hexToRgb(x),C=r.rgbToHsv(y);g.h=C.h,g.v=C.v,g.s=C.s,null===i&&function(){function e(e,t){var n=document.createElement(e);return t&&(n.className=t.join(" ")),n}i=e("div",["popup","color-picker-popup"]),a=e("div",["block","picker","value-saturation-picker"]),l=e("span",["color-filter","outlined"]),a.appendChild(l);var r=e("span",["color-filter","outlined"]);r.style.background="linear-gradient(to top, black, rgba(0,0,0,0))",a.appendChild(r),u=e("span",["cursor"]),a.appendChild(u),i.appendChild(a),c=e("div",["block","picker","hue-picker"]);var o=e("span",["hue-bar"]);c.appendChild(o),d=e("span",["cursor"]),c.appendChild(d),i.appendChild(c);var x=e("div",["preview-block"]);(s=e("div",["preview-color","outlined"])).classList.add("block"),x.appendChild(s);{var y=document.createElement("div");function C(e){var t=document.createElement("div"),n=document.createElement("span");n.textContent=e+":",n.classList.add("preview-text-label");var r=document.createElement("span");return t.appendChild(n),t.appendChild(r),y.appendChild(t),r}y.classList.add("block"),h=C("hex"),p=C("rgb"),v=C("hsv"),x.appendChild(y)}i.appendChild(x),f(c,function(e){g.h=n(360*e.x,0),m()}),f(a,function(e){g.s=t(e.x,0),g.v=t(1-e.y,0),m(),u.style.left=b(e.x),u.style.top=b(e.y)});var w=!1;i.addEventListener("mousedown",function(){w=!0}),window.addEventListener("mouseup",function(e){!i.contains(e.target)&&i.parentElement&&!w&&i.parentElement.removeChild(i),w=!1})}(),m(),i.style.top="",i.style.left="",e.attachPopup(i),function(){if(i&&i.parentElement){var e=(document.querySelector(".controls-block")||document.body).getBoundingClientRect();i.style.maxWidth=e.width-32+"px",i.style.maxHeight=e.height-32+"px";var t=i.parentElement.getBoundingClientRect(),n=i.getBoundingClientRect(),r=Math.max(0,e.left+16-t.left),o=Math.min(0,e.left+e.width-16-(t.left+n.width)),a=Math.max(0,e.top+16-t.top),l=Math.min(0,e.top+e.height-16-(t.top+n.height));i.style.left=r+o+"px",i.style.top=a+l+"px"}}()}}(o||(o={}));var a={};window.addEventListener("load",function(){for(var e=document.querySelectorAll(".color-picker"),t=function(t){var n=e[t],r=new i(n);n.id&&(a[n.id]=r),n.addEventListener("click",function(e){o.createPopup(r),e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()})},n=0;n<e.length;n++)t(n)}),e.addObserver=function(e,t){var n=a[e];return n&&n.observers.push(t),!1},e.getValue=function(e){var t=a[e].value;return r.hexToRgb(t)},e.setValue=function(e,t,n,o){var i={r:t,g:n,b:o},l=r.rgbToHex(i);a[e].value=l}}(e.ColorPicker||(e.ColorPicker={}))}(Page||(Page={}));